(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{763:(e,t,s)=>{"use strict";s.d(t,{HardwareStatus:()=>d});var a=s(95155),r=s(12115),i=s(53904),n=s(14738),c=s(97168),l=s(88482),o=s(53580);function d(){let{toast:e}=(0,o.d)(),[t,s]=(0,r.useState)(!1),d=async()=>{s(!0);try{await new Promise(e=>setTimeout(e,1e3)),e({title:"Hardware status refreshed",description:"Hardware status information has been updated."})}catch(t){e({title:"Refresh failed",description:"There was an error refreshing hardware status.",variant:"destructive"})}finally{s(!1)}};return(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.ZB,{className:"text-xl font-bold",children:"Hardware Status"}),(0,a.jsx)(l.BT,{children:"CM4-IO-WIRELESS-BASE hardware status"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(c.$,{variant:"outline",size:"sm",onClick:d,disabled:t,children:[(0,a.jsx)(i.A,{className:"mr-2 h-4 w-4 ".concat(t?"animate-spin":"")}),"Refresh"]}),(0,a.jsx)(c.$,{variant:"outline",size:"icon",children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})]})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"}),(0,a.jsx)("span",{children:"Wi-Fi Module"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"}),(0,a.jsx)("span",{children:"Bluetooth Module"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-red-500"}),(0,a.jsx)("span",{children:"CAN Interface"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"}),(0,a.jsx)("span",{children:"I2C Bus"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"}),(0,a.jsx)("span",{children:"SPI Bus"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"}),(0,a.jsx)("span",{children:"GPIO Pins"})]})]})})]})}},4830:(e,t,s)=>{"use strict";s.d(t,{DashboardCharts:()=>b});var a=s(95155),r=s(12115),i=s(88482),n=s(34964),c=s(83540),l=s(93504),o=s(94754),d=s(96025),h=s(16238),u=s(94517),m=s(21374),p=s(99445),x=s(62341),v=s(3401),f=s(58227),y=s(58700);let g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24;return Array.from({length:e},(e,t)=>({time:"".concat((t%24).toString().padStart(2,"0"),":00"),temperature:Math.round((20+5*Math.sin(t/3)+2*Math.random())*10)/10,humidity:Math.round((50+15*Math.cos(t/3)+5*Math.random())*10)/10,pressure:Math.round((1010+10*Math.sin(t/6)+3*Math.random())*10)/10,cpu:Math.round((15+10*Math.sin(t/2)+5*Math.random())*10)/10,memory:Math.round((30+15*Math.cos(t/4)+10*Math.random())*10)/10}))},j=g(),w=g(),S=g(7).map((e,t)=>({...e,day:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][t]}));function b(){let[e,t]=(0,r.useState)("line");return(0,a.jsxs)(i.Zp,{className:"col-span-2",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"System Metrics"}),(0,a.jsx)(i.BT,{children:"Performance metrics over time"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)(n.tU,{defaultValue:"line",onValueChange:t,children:[(0,a.jsxs)(n.j7,{className:"mb-4",children:[(0,a.jsx)(n.Xi,{value:"line",children:"Line Chart"}),(0,a.jsx)(n.Xi,{value:"area",children:"Area Chart"}),(0,a.jsx)(n.Xi,{value:"bar",children:"Bar Chart"}),(0,a.jsx)(n.Xi,{value:"multi",children:"Multi-Line"})]}),(0,a.jsx)(n.av,{value:"line",className:"h-[300px]",children:(0,a.jsx)(y.at,{config:{temperature:{label:"Temperature",color:"hsl(var(--chart-1))"}},children:(0,a.jsx)(c.u,{width:"100%",height:"100%",children:(0,a.jsxs)(l.b,{data:j,children:[(0,a.jsx)(o.d,{strokeDasharray:"3 3",vertical:!1}),(0,a.jsx)(d.W,{dataKey:"time"}),(0,a.jsx)(h.h,{}),(0,a.jsx)(u.m,{content:(0,a.jsx)(y.Nt,{indicator:"line"})}),(0,a.jsx)(m.N,{type:"monotone",dataKey:"temperature",stroke:"var(--color-temperature)",strokeWidth:2,dot:!1,activeDot:{r:6}})]})})})}),(0,a.jsx)(n.av,{value:"area",className:"h-[300px]",children:(0,a.jsx)(y.at,{config:{humidity:{label:"Humidity",color:"hsl(var(--chart-2))"}},children:(0,a.jsx)(c.u,{width:"100%",height:"100%",children:(0,a.jsxs)(p.Q,{data:w,children:[(0,a.jsx)(o.d,{strokeDasharray:"3 3",vertical:!1}),(0,a.jsx)(d.W,{dataKey:"time"}),(0,a.jsx)(h.h,{}),(0,a.jsx)(u.m,{content:(0,a.jsx)(y.Nt,{indicator:"line"})}),(0,a.jsx)(x.G,{type:"monotone",dataKey:"humidity",stroke:"var(--color-humidity)",fill:"var(--color-humidity)",fillOpacity:.2})]})})})}),(0,a.jsx)(n.av,{value:"bar",className:"h-[300px]",children:(0,a.jsx)(y.at,{config:{cpu:{label:"CPU Usage",color:"hsl(var(--chart-3))"}},children:(0,a.jsx)(c.u,{width:"100%",height:"100%",children:(0,a.jsxs)(v.E,{data:S,children:[(0,a.jsx)(o.d,{strokeDasharray:"3 3",vertical:!1}),(0,a.jsx)(d.W,{dataKey:"day"}),(0,a.jsx)(h.h,{}),(0,a.jsx)(u.m,{content:(0,a.jsx)(y.Nt,{indicator:"line"})}),(0,a.jsx)(f.y,{dataKey:"cpu",fill:"var(--color-cpu)",radius:4})]})})})}),(0,a.jsx)(n.av,{value:"multi",className:"h-[300px]",children:(0,a.jsx)(y.at,{config:{temperature:{label:"Temperature",color:"hsl(var(--chart-1))"},humidity:{label:"Humidity",color:"hsl(var(--chart-2))"},pressure:{label:"Pressure",color:"hsl(var(--chart-3))"}},children:(0,a.jsx)(c.u,{width:"100%",height:"100%",children:(0,a.jsxs)(l.b,{data:j,children:[(0,a.jsx)(o.d,{strokeDasharray:"3 3",vertical:!1}),(0,a.jsx)(d.W,{dataKey:"time"}),(0,a.jsx)(h.h,{yAxisId:"left"}),(0,a.jsx)(h.h,{yAxisId:"right",orientation:"right"}),(0,a.jsx)(u.m,{content:(0,a.jsx)(y.Nt,{indicator:"line"})}),(0,a.jsx)(m.N,{yAxisId:"left",type:"monotone",dataKey:"temperature",stroke:"var(--color-temperature)",strokeWidth:2,dot:!1}),(0,a.jsx)(m.N,{yAxisId:"left",type:"monotone",dataKey:"humidity",stroke:"var(--color-humidity)",strokeWidth:2,dot:!1}),(0,a.jsx)(m.N,{yAxisId:"right",type:"monotone",dataKey:"pressure",stroke:"var(--color-pressure)",strokeWidth:2,dot:!1})]})})})})]})})]})}},7565:(e,t,s)=>{"use strict";s.d(t,{SystemStatus:()=>y});var a=s(95155);class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}startMetricsPolling(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;this.stopMetricsPolling(),this.refreshRate=e,console.log("Starting system metrics polling with refresh rate: ".concat(e,"ms")),this.fetchMetrics(),this.refreshInterval=setInterval(()=>{this.fetchMetrics()},this.refreshRate)}stopMetricsPolling(){this.refreshInterval&&(console.log("Stopping system metrics polling"),clearInterval(this.refreshInterval),this.refreshInterval=null)}async fetchMetrics(){try{let e=await fetch("/api/system/metrics",{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!e.ok)throw Error("Error fetching metrics: ".concat(e.status));let t=await e.json();t.success&&t.metrics&&(this.metrics=t.metrics,this.notifyListeners())}catch(e){console.error("Error fetching system metrics:",e)}}getMetrics(){return this.metrics}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}notifyListeners(){this.metrics&&this.listeners.forEach(e=>{try{e(this.metrics)}catch(e){console.error("Error in metrics listener:",e)}})}getRefreshRate(){return this.refreshRate}constructor(){this.metrics=null,this.refreshInterval=null,this.refreshRate=500,this.listeners=[],this.metrics={cpu:{usage:0},memory:{total:0,used:0,free:0},storage:{total:0,used:0,free:0},temperature:{cpu:0},uptime:{days:0,hours:0,minutes:0},services:[]}}}var i=s(12115),n=s(19946);let c=(0,n.A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);var l=s(73314),o=s(44992);let d=(0,n.A)("CirclePower",[["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M7.998 9.003a5 5 0 1 0 8-.005",key:"1pek45"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),h=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm",children:t})},u=e=>{let{className:t,children:s}=e;return(0,a.jsx)("div",{className:"flex flex-col space-y-1.5 p-6 ".concat(t||""),children:s})},m=e=>{let{children:t}=e;return(0,a.jsx)("h3",{className:"text-2xl font-semibold leading-none tracking-tight",children:t})},p=e=>{let{children:t}=e;return(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t})},x=e=>{let{className:t,children:s}=e;return(0,a.jsx)("div",{className:"p-6 pt-0 ".concat(t||""),children:s})},v=e=>{let{value:t,className:s}=e;return(0,a.jsx)("div",{className:"relative h-4 w-full overflow-hidden rounded-full bg-secondary ".concat(s||""),children:(0,a.jsx)("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})},f=e=>{let{className:t,children:s}=e;return(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(t||""),children:s})};function y(){let[e,t]=(0,i.useState)({cpu:{usage:0},memory:{total:0,used:0,free:0},storage:{total:0,used:0,free:0},temperature:{cpu:0},uptime:{days:0,hours:0,minutes:0}}),[s,n]=(0,i.useState)("healthy");(0,i.useEffect)(()=>{let e=r.getInstance(),s=e=>{t(e),e.cpu.usage>90||e.temperature.cpu>80?n("critical"):e.cpu.usage>70||e.temperature.cpu>70?n("warning"):n("healthy")};return e.addListener(s),e.startMetricsPolling(500),()=>{e.removeListener(s)}},[]);let y=e.memory.total/1024,g=e.memory.used/1024,j=e.memory.total>0?e.memory.used/e.memory.total*100:0,w=e.storage.total>0?e.storage.used/e.storage.total*100:0;return(0,a.jsxs)(h,{children:[(0,a.jsxs)(u,{className:"pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(m,{children:"System Status"}),(0,a.jsx)(f,{className:"healthy"===s?"bg-green-500":"warning"===s?"bg-amber-500":"bg-red-500",children:"healthy"===s?"Healthy":"warning"===s?"Warning":"Critical"})]}),(0,a.jsx)(p,{children:"CM4-IO-WIRELESS-BASE with Raspberry Pi CM4"})]}),(0,a.jsx)(x,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"h-4 w-4 text-blue-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"CPU Usage"})]}),(0,a.jsxs)("span",{className:"text-sm",children:[e.cpu.usage.toFixed(1),"%"]})]}),(0,a.jsx)(v,{value:e.cpu.usage,className:"h-2"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c,{className:"h-4 w-4 text-purple-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Memory"})]}),(0,a.jsxs)("span",{className:"text-sm",children:[g.toFixed(1)," GB / ",y.toFixed(1)," GB"]})]}),(0,a.jsx)(v,{value:j,className:"h-2"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c,{className:"h-4 w-4 text-amber-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Storage"})]}),(0,a.jsxs)("span",{className:"text-sm",children:[e.storage.used.toFixed(1)," GB / ",e.storage.total.toFixed(1)," GB"]})]}),(0,a.jsx)(v,{value:w,className:"h-2"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Temperature"})]}),(0,a.jsxs)("span",{className:"text-sm",children:[e.temperature.cpu,"\xb0C"]})]}),(0,a.jsx)(v,{value:e.temperature.cpu,max:100,className:"h-2"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Uptime"})]}),(0,a.jsxs)("span",{className:"text-sm",children:[e.uptime.days,"d ",e.uptime.hours,"h ",e.uptime.minutes,"m"]})]})]})})]})}},14738:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},18832:(e,t,s)=>{"use strict";s.d(t,{QuickActions:()=>v});var a=s(95155),r=s(12115),i=s(35695),n=s(88482),c=s(97168),l=s(84616),o=s(53904),d=s(91788),h=s(23861);let u=(0,s(19946).A)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);var m=s(53580);class p{startMonitoring(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;this.updateInterval&&clearInterval(this.updateInterval),this.updateInterval=setInterval(()=>{this.updateServiceStatus(),this.updateInterfaceStatus()},e),console.log("Service monitoring started with interval of ".concat(e,"ms"))}stopMonitoring(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null,console.log("Service monitoring stopped"))}getServiceStatus(e){return e?this.services.find(t=>t.name===e)||{name:e,status:"unknown",lastUpdated:Date.now()}:[...this.services]}getInterfaceStatus(e){return e?this.interfaces.find(t=>t.name===e)||{name:e,type:"gpio",status:"unknown",lastUpdated:Date.now()}:[...this.interfaces]}async restartService(e){return new Promise(t=>{let s=this.services.find(t=>t.name===e);if(!s){console.log("Service ".concat(e," not found")),t(!1);return}console.log("Restarting service ".concat(e,"...")),s.status="stopped",setTimeout(()=>{s.status="running",s.uptime=0,s.lastUpdated=Date.now(),console.log("Service ".concat(e," restarted successfully")),t(!0)},2e3)})}async enableInterface(e){return new Promise(t=>{let s=this.interfaces.find(t=>t.name===e);if(!s){console.log("Interface ".concat(e," not found")),t(!1);return}console.log("Enabling interface ".concat(e,"...")),setTimeout(()=>{s.status="active",s.lastUpdated=Date.now(),console.log("Interface ".concat(e," enabled successfully")),t(!0)},1e3)})}async disableInterface(e){return new Promise(t=>{let s=this.interfaces.find(t=>t.name===e);if(!s){console.log("Interface ".concat(e," not found")),t(!1);return}console.log("Disabling interface ".concat(e,"...")),setTimeout(()=>{s.status="inactive",s.lastUpdated=Date.now(),console.log("Interface ".concat(e," disabled successfully")),t(!0)},1e3)})}updateServiceStatus(){this.services.forEach(e=>{e.cpu=Math.max(.1,Math.min(100,e.cpu+(2*Math.random()-1))),e.memory=Math.max(10,Math.min(1024,e.memory+(10*Math.random()-5))),e.uptime+=5,Math.random()>.98&&(e.status="running"===e.status?"error":"running"),e.lastUpdated=Date.now()})}updateInterfaceStatus(){this.interfaces.forEach(e=>{Math.random()>.95&&(e.status="active"===e.status?"inactive":"active"),"i2c"===e.type&&e.details?e.details.devices=Math.floor(6*Math.random())+1:"spi"===e.type&&e.details&&(e.details.devices=Math.floor(3*Math.random())+1),e.lastUpdated=Date.now()})}constructor(){this.services=[],this.interfaces=[],this.updateInterval=null,this.services=[{name:"mongodb",status:"running",pid:1234,memory:256.5,cpu:2.3,uptime:86400,port:27017,lastUpdated:Date.now()},{name:"influxd",status:"running",pid:1235,memory:128.7,cpu:1.5,uptime:172800,port:8086,lastUpdated:Date.now()},{name:"grafana-server",status:"running",pid:1236,memory:98.2,cpu:.8,uptime:86400,port:3e3,lastUpdated:Date.now()},{name:"webmin",status:"running",pid:1237,memory:45.6,cpu:.2,uptime:259200,port:1e4,lastUpdated:Date.now()},{name:"nginx",status:"running",pid:1238,memory:32.1,cpu:.3,uptime:172800,port:80,lastUpdated:Date.now()}],this.interfaces=[{name:"SPI0",type:"spi",status:"active",details:{speed:"10 MHz",mode:0,devices:2},lastUpdated:Date.now()},{name:"I2C1",type:"i2c",status:"active",details:{speed:"400 kHz",devices:4},lastUpdated:Date.now()},{name:"CAN0",type:"can",status:"inactive",details:{bitrate:"500 kbit/s"},lastUpdated:Date.now()},{name:"UART0",type:"uart",status:"active",details:{baudrate:"115200",parity:"none",databits:8,stopbits:1},lastUpdated:Date.now()},{name:"GPIO",type:"gpio",status:"active",details:{pins:40,used:8},lastUpdated:Date.now()}]}}let x=null;function v(){let e=(0,i.useRouter)(),{toast:t}=(0,m.d)(),[s,v]=(0,r.useState)(!1),[f,y]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),b=async()=>{v(!0);try{await new Promise(e=>setTimeout(e,1e3)),e.refresh(),t({title:"Data Refreshed",description:"All dashboard data has been updated."})}catch(e){t({title:"Refresh Failed",description:"There was an error refreshing the data.",variant:"destructive"})}finally{v(!1)}},N=async()=>{y(!0);try{await new Promise(e=>setTimeout(e,1500));let e="\n[".concat(new Date().toISOString(),"] System started\n[").concat(new Date().toISOString(),"] MongoDB connected\n[").concat(new Date().toISOString(),"] InfluxDB connected\n[").concat(new Date().toISOString(),"] Grafana service running\n[").concat(new Date().toISOString(),"] Nginx service running\n[").concat(new Date().toISOString(),"] Webmin service running\n[").concat(new Date().toISOString(),"] SPI interface active\n[").concat(new Date().toISOString(),"] I2C interface active\n[").concat(new Date().toISOString(),"] CAN0 interface inactive\n[").concat(new Date().toISOString(),"] Temperature sensor reading: 42\xb0C\n[").concat(new Date().toISOString(),"] Pressure sensor reading: 1013.2 hPa\n[").concat(new Date().toISOString(),"] Flow sensor reading: 2.3 L/min\n[").concat(new Date().toISOString(),"] Smart Light Controller status: On (75%)\n[").concat(new Date().toISOString(),"] Motor Controller status: Off\n[").concat(new Date().toISOString(),"] Gateway Node status: Active\n[").concat(new Date().toISOString(),"] Bluetooth Beacon status: Connected\n      ").trim(),s=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download="system-logs-".concat(new Date().toISOString().split("T")[0],".txt"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),t({title:"Logs Exported",description:"System logs have been exported successfully."})}catch(e){t({title:"Export Failed",description:"There was an error exporting the logs.",variant:"destructive"})}finally{y(!1)}},M=async()=>{j(!0);try{await new Promise(e=>setTimeout(e,1e3)),t({title:"Alerts Cleared",description:"All system alerts have been cleared."}),e.refresh()}catch(e){t({title:"Clear Failed",description:"There was an error clearing the alerts.",variant:"destructive"})}finally{j(!1)}},I=async()=>{S(!0);try{let s=(x||(x=new p).startMonitoring(),x);for(let e of(t({title:"Restarting Services",description:"Attempting to restart all system services..."}),["mongodb","influxd","grafana-server","nginx","webmin"]))await s.restartService(e),await new Promise(e=>setTimeout(e,500));t({title:"Services Restarted",description:"All system services have been restarted successfully."}),e.refresh()}catch(e){t({title:"Restart Failed",description:"There was an error restarting the services.",variant:"destructive"})}finally{S(!1)}};return(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"pb-2",children:[(0,a.jsx)(n.ZB,{children:"Quick Actions"}),(0,a.jsx)(n.BT,{children:"Common system operations"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(c.$,{variant:"outline",size:"sm",className:"h-9 justify-start",onClick:()=>{e.push("/devices/add"),t({title:"Add Device",description:"Navigating to device creation page."})},children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Add Device"]}),(0,a.jsxs)(c.$,{variant:"outline",size:"sm",className:"h-9 justify-start",onClick:b,disabled:s,children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4 ".concat(s?"animate-spin":"")}),"Refresh Data"]}),(0,a.jsxs)(c.$,{variant:"outline",size:"sm",className:"h-9 justify-start",onClick:N,disabled:f,children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),f?"Exporting...":"Export Logs"]}),(0,a.jsxs)(c.$,{variant:"outline",size:"sm",className:"h-9 justify-start",onClick:M,disabled:g,children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),g?"Clearing...":"Clear Alerts"]}),(0,a.jsxs)(c.$,{variant:"outline",size:"sm",className:"h-9 justify-start col-span-2",onClick:I,disabled:w,children:[(0,a.jsx)(u,{className:"mr-2 h-4 w-4"}),w?"Restarting...":"Restart Services"]})]})})]})}},23861:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},26943:(e,t,s)=>{Promise.resolve().then(s.bind(s,4830)),Promise.resolve().then(s.bind(s,96555)),Promise.resolve().then(s.bind(s,763)),Promise.resolve().then(s.bind(s,18832)),Promise.resolve().then(s.bind(s,7565)),Promise.resolve().then(s.bind(s,16891))},35695:(e,t,s)=>{"use strict";var a=s(18999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},44992:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]])},53580:(e,t,s)=>{"use strict";s.d(t,{d:()=>u});var a=s(12115);let r={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"},i=0,n=new Map,c=(e,t)=>{switch(t.type){case r.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case r.UPDATE_TOAST:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case r.DISMISS_TOAST:{let{toastId:s}=t;if(s)n.has(s)&&(clearTimeout(n.get(s)),n.delete(s));else for(let[e,t]of n.entries())clearTimeout(t),n.delete(e);return{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case r.REMOVE_TOAST:if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],o={toasts:[]};function d(e){o=c(o,e),l.forEach(e=>{e(o)})}function h(e){let{...t}=e,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:r.DISMISS_TOAST,toastId:s});return d({type:r.ADD_TOAST,toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:r.UPDATE_TOAST,toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(o);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>d({type:r.DISMISS_TOAST,toastId:e})}}},53904:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},60704:(e,t,s)=>{"use strict";s.d(t,{B8:()=>D,UC:()=>C,bL:()=>k,l9:()=>T});var a=s(12115),r=s(85185),i=s(46081),n=s(89196),c=s(28905),l=s(63655),o=s(94315),d=s(5845),h=s(61285),u=s(95155),m="Tabs",[p,x]=(0,i.A)(m,[n.RG]),v=(0,n.RG)(),[f,y]=p(m),g=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,onValueChange:r,defaultValue:i,orientation:n="horizontal",dir:c,activationMode:m="automatic",...p}=e,x=(0,o.jH)(c),[v,y]=(0,d.i)({prop:a,onChange:r,defaultProp:i});return(0,u.jsx)(f,{scope:s,baseId:(0,h.B)(),value:v,onValueChange:y,orientation:n,dir:x,activationMode:m,children:(0,u.jsx)(l.sG.div,{dir:x,"data-orientation":n,...p,ref:t})})});g.displayName=m;var j="TabsList",w=a.forwardRef((e,t)=>{let{__scopeTabs:s,loop:a=!0,...r}=e,i=y(j,s),c=v(s);return(0,u.jsx)(n.bL,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:a,children:(0,u.jsx)(l.sG.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});w.displayName=j;var S="TabsTrigger",b=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,disabled:i=!1,...c}=e,o=y(S,s),d=v(s),h=I(o.baseId,a),m=A(o.baseId,a),p=a===o.value;return(0,u.jsx)(n.q7,{asChild:!0,...d,focusable:!i,active:p,children:(0,u.jsx)(l.sG.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":m,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...c,ref:t,onMouseDown:(0,r.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(a)}),onKeyDown:(0,r.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(a)}),onFocus:(0,r.m)(e.onFocus,()=>{let e="manual"!==o.activationMode;p||i||!e||o.onValueChange(a)})})})});b.displayName=S;var N="TabsContent",M=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:r,forceMount:i,children:n,...o}=e,d=y(N,s),h=I(d.baseId,r),m=A(d.baseId,r),p=r===d.value,x=a.useRef(p);return a.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,u.jsx)(c.C,{present:i||p,children:s=>{let{present:a}=s;return(0,u.jsx)(l.sG.div,{"data-state":p?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!a,id:m,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0},children:a&&n})}})});function I(e,t){return"".concat(e,"-trigger-").concat(t)}function A(e,t){return"".concat(e,"-content-").concat(t)}M.displayName=N;var k=g,D=w,T=b,C=M},73314:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]])},84616:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},91788:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},96555:(e,t,s)=>{"use strict";s.d(t,{DashboardHeader:()=>d});var a=s(95155),r=s(35695),i=s(12115),n=s(53904);let c=(0,s(19946).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var l=s(97168),o=s(53580);function d(){let e=(0,r.useRouter)(),{toast:t}=(0,o.d)(),[s,d]=(0,i.useState)(!1),h=async()=>{d(!0);try{await new Promise(e=>setTimeout(e,1e3)),e.refresh(),t({title:"Dashboard refreshed",description:"All dashboard data has been updated."})}catch(e){t({title:"Refresh failed",description:"There was an error refreshing the dashboard.",variant:"destructive"})}finally{d(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:justify-between md:space-y-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Overview of your CM4-IO-WIRELESS-BASE system and connected devices"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:h,disabled:s,children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4 ".concat(s?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)(l.$,{onClick:()=>{e.push("/devices/add"),t({title:"Add Device",description:"Navigating to device creation page."})},children:[(0,a.jsx)(c,{className:"mr-2 h-4 w-4"}),"Add Device"]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5393,8577,7658,941,4363,8441,1684,7358],()=>t(26943)),_N_E=e.O()}]);