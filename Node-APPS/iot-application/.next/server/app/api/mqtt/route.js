(()=>{var e={};e.id=6096,e.ids=[6096],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},59151:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>d,serverHooks:()=>h,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>p,POST:()=>c});var a=r(96559),n=r(48088),o=r(37719),u=r(32190);let i={temperature:[],humidity:[],pressure:[]};for(let e=0;e<10;e++){let t=Date.now()-(9-e)*6e4;i.temperature.push({value:Math.round((20+5*Math.random())*10)/10,unit:"\xb0C",timestamp:t}),i.humidity.push({value:Math.round((40+20*Math.random())*10)/10,unit:"%",timestamp:t}),i.pressure.push({value:Math.round((1e3+15*Math.random())*10)/10,unit:"hPa",timestamp:t})}async function p(e){let t=e.nextUrl.searchParams.get("sensor");return t&&t in i?u.NextResponse.json({success:!0,data:i[t]}):u.NextResponse.json({success:!0,data:{temperature:i.temperature.slice(-1)[0],humidity:i.humidity.slice(-1)[0],pressure:i.pressure.slice(-1)[0]}})}async function c(e){try{let t=await e.json();if(!t.topic||!t.payload)return u.NextResponse.json({success:!1,error:"Missing topic or payload"},{status:400});let{topic:r,payload:s}=t,a=r.split("/");if(a.length>=3&&"cm4"===a[0]&&"sensors"===a[1]){let e=a[2];if(e in i)try{let t="string"==typeof s?JSON.parse(s):s;i[e].push({value:t.value,unit:t.unit,timestamp:Date.now()}),i[e].length>100&&(i[e]=i[e].slice(-100))}catch(e){console.error("Error parsing payload:",e)}}return u.NextResponse.json({success:!0,message:"Message published"})}catch(e){return u.NextResponse.json({success:!1,error:"Invalid request"},{status:400})}}let d=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/mqtt/route",pathname:"/api/mqtt",filename:"route",bundlePath:"app/api/mqtt/route"},resolvedPagePath:"C:\\Users\\Mtlantla\\Desktop\\EmberCore\\Dev_RP3_c\\Node-APPS\\iot-application\\app\\api\\mqtt\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:h}=d;function x(){return(0,o.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7719,580],()=>r(59151));module.exports=s})();